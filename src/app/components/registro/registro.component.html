<header></header>
<!-- Div de errores y info -->
<app-error *ngIf="this.showmodalError"></app-error>
<app-info *ngIf="this.showmodalInfo"></app-info>

<div class="h-screen bg-cover registro">
  <!-- div contenedor-->
    <div class="container mx-auto h-full flex flex-1 justify-center items-center">
        <div class=" w-full max-w-2xl md:flex m-0 divide-x divide-black">
          <!-- tarjeta de la parte izquierda -->
            <div class="hidden md:flex flex-col w-3/5 bg-white rounded-l shadow-xl op-92 p-3">
                <h1 class="text-3xl font-extrabold">Bienvenido a LvLDungeons!</h1>
                <br><hr><br>
                <h6>Explora las mazmorras detrás de las puertas y derrota los monstruos para conseguir los tesoros
                    y lograr la victoria. ¿Serás capaz de vencer?
                </h6>
                <br><hr><br>
                <img class="m-0 p-0 shadow-xl rounded" src="/assets/images/img2.jpg" alt="Imagen de pasillos oscuros de mazmorra">
            </div>
            <!-- Div de la parte derecha, recoge el formulario-->
            <div class="w-11/12 p-12 bg-white sm:w-8/12 md:w-1/2 lg:w-8/12 shadow-xl rounded-r divide-y divide-black op-92">
                <form [formGroup]="registerForm" class="mt-6">
                    <p class="text-black text-center text-lg font-bold">REGISTRO</p>
                    <!--input nombre-->
                    <label for="nombre" class="block text-xs font-semibold text-gray-600 uppercase">Nombre</label>
                    <!--Si el input no es válido el borde se vuelve rojo-->
                    <input [class]="this.registerForm.controls.nombre.invalid && this.registerForm.controls.nombre.value != '' 
                    ? 'w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white border-solid border-red-500 border-2'
                    : 'w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white'" 
                    type="text" formControlName="nombre" id="inputNombre" placeholder="Nombre">

                    <!--input de edad-->
                    <label for="lastname" class="block text-xs font-semibold text-gray-600 uppercase">Edad</label>
                    <!--Si el input no es válido el borde se vuelve rojo-->
                    <input [class]="this.registerForm.controls.edad.invalid && this.registerForm.controls.edad.value != '' 
                    ? 'w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white border-solid border-red-500 border-2'
                    : 'w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white'" 
                    type="number" formControlName="edad" id="inputEdad" placeholder="Edad">

                    <!--input email-->
                    <label for="email" class="block mt-2 text-xs font-semibold text-gray-600 uppercase">E-mail</label>
                    <!--Si el input no es válido el borde se vuelve rojo-->
                    <input [class]="this.registerForm.controls.email.invalid && this.registerForm.controls.email.value != '' 
                    ? 'w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white border-solid border-red-500 border-2'
                    : 'w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white'" 
                    type="text" formControlName="email" id="inputEmail" placeholder="Email">

                    <!--input nickname-->
                    <label for="inputNickname" class="block mt-2 text-xs font-semibold text-gray-600 uppercase">Nickname</label>
                    <!--Si el input no es válido el borde se vuelve rojo-->
                    <input [class]="this.registerForm.controls.username.invalid && this.registerForm.controls.username.value != '' 
                    ? 'w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white border-solid border-red-500 border-2'
                    : 'w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white'" 
                    type="text" formControlName="username" id="inputNickname" placeholder="Nickname">
                    
                    <!--inout de la contraseña-->
                    <label for="password" class="block mt-2 text-xs font-semibold text-gray-600 uppercase">Password</label>
                    <div class="relative">
                      <!--Si el input no es válido el borde se vuelve rojo y según el atributo ocultarPass se muestra la pass o no
                        cambiándolo con un botón dentro del input-->
                        <input [class]="this.registerForm.controls.password.invalid && this.registerForm.controls.password.value != '' 
                        ? 'w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white border-solid border-red-500 border-2'
                        : 'w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white'" 
                        [type]="ocultarPass ? 'password': 'text'" formControlName="password" id="inputPasword" placeholder="Contraseña">
                    
                        <span class="absolute inset-y-0 right-0 mx-3 flex items-center pl-2">
                            <button class="" *ngIf="!ocultarPass" (click)="ocultarPass = !ocultarPass">
                              <img src="../../../assets/images/baseline_visibility_black_18dp.png" alt="Icono visibilidad contraseña">
                            </button>
                            <button clas="" *ngIf="ocultarPass" (click)="ocultarPass = !ocultarPass">
                              <img src="../../../assets/images/baseline_visibility_off_black_18dp.png" alt="Icono visibilidad off contraseña">
                            </button>
                          </span>
                    </div>

                    <!--input confirmar contraseña-->
                    <label for="password-confirm" class="block mt-2 text-xs font-semibold text-gray-600 uppercase">Confirmar password</label>
                    <div class="relative">
                        <!--Si el input no es válido el borde se vuelve rojo y según el atributo ocultarPass se muestra la pass o no
                        cambiándolo con un botón dentro del input-->
                        <input [class]="this.registerForm.controls.repetir_password.invalid && this.registerForm.controls.repetir_password.value != '' 
                        ? 'w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white border-solid border-red-500 border-2'
                        : 'w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white'" 
                        [type]="ocultarPassRep ? 'password': 'text'" formControlName="repetir_password" id="inputPaswordConf" placeholder="Confirmar Contraseña">
                        <span class="absolute inset-y-0 right-0 mx-3 flex items-center pl-2">
                            <button class="" *ngIf="!ocultarPassRep" (click)="ocultarPassRep = !ocultarPassRep">
                              <img src="../../../assets/images/baseline_visibility_black_18dp.png" alt="Icono visibilidad contraseña">
                            </button>
                            <button clas="" *ngIf="ocultarPassRep" (click)="ocultarPassRep = !ocultarPassRep">
                              <img src="../../../assets/images/baseline_visibility_off_black_18dp.png" alt="Icono visibilidad off contraseña">
                            </button>
                          </span>
                    </div>

                    <!--boton de resgistro que llama al servicio que lanza la petición al back-->
                    <div class="mt-4 items-center flex flex-col justify-between">
                      <p *ngIf="registerForm.controls.repetir_password.errors != null && registerForm.controls.repetir_password.errors.passwordMismatch" class="text-red-700 text-sm">Las contraseñas no coinciden</p>
                      <p *ngIf="error" class="text-red-700 text-sm">{{mensaje}}</p>
                      <button  type="button" (click)="registro()" [disabled]="registerForm.invalid"
                      [class]="registerForm.invalid ? 'cursor-default px-4 py-1 text-white font-light tracking-wider bg-gray-600 rounded mt-4 mb-4' : 'px-4 py-1 text-white font-light tracking-wider bg-gray-900 hover:bg-gray-800 mt-4 mb-4 rounded'">
                      Registrarse
                    </button>
                  </div>
            </form>
            <!--div que contiene el botón para ir al login-->
            <div id="login">
                <br>
                <h5>¿Ya tienes una cuenta?</h5>
                <br>
                <!--boton para ir al login-->
                <button class="px-4 py-1 text-white font-light tracking-wider bg-gray-900 hover:bg-gray-800 rounded"
                routerLink="/login">Iniciar Sesion</button>
            </div>
        </div>
    </div>
</div>
</div>
<footer></footer>

